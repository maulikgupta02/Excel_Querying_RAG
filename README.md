# Generalized RAG script for handling excel datasets using chatgpt-4o and Presidio Anonymizer  

## Inputs required from the user are as under
1. excel dataset
2. dataset description (information on each column and column values) --> could be auto generated and sent to user for validation
3. table columns to be anonymized
4. names of important columns whose values can be given in queries
  

## LLMs 

### Query Restructuring LLM
This llm is responsible for restructuring the user query to best match the table fields and values.

### Table Filtration LLM
This llm generates a pandas query to filter the dataframe according to the user query.

### Response Generation LLM
This llm improves the readability of the response generated by the filtration LLM by explaining the answer in words.
  

## Architecture  

### Data Preprocessing
The ingested excel sheets is processed, removing unneceassary data and handling mixed datatypes.  
The file is converted into a parque file for preserving dtype and improving performance.  

### Query Generation
User query is anonymized and sent to the 1st LLM, along with table details for restructuring.

### Table Filtration  
The dataframe is filtered according to the query by passing the table schema and the query to the 2nd LLM.

### Feedback Loop at Filatration LLM
A feedback loop is designed to again poke the LLM along with the generated error (if any) for 'n' times to improve performance.

### Response Generation  
Final response is generated by the 3rd LLm by passing in the filtered dataframe, and the filtered query.


# Project Flow
1. add a .env file with openai gpt-4o API creds
2. run the data_ingestion_anonymization after uploading all the requirements for creating all the temp files and the processed data
3. run the command "streamlit run main."
4. good to go (;

### ***NOTE***
data_ingestion_anonymization could be altered for use-case specific changes to the excel sheet.